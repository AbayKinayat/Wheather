const iconElement=document.querySelector(".weather-icon"),tempElement=document.querySelector(".temperature-value p"),descElement=document.querySelector(".temperature-description p"),locationElement=document.querySelector(".city-title"),notificationElement=document.querySelector(".notification"),windElement=document.querySelector(".wind p"),maxTempElement=document.querySelector(".max p"),minTempElement=document.querySelector(".min p"),humidityElement=document.querySelector(".humidity p"),weather={temperature:{unit:"celsius"}},KELVIN=273,KEY="e932d2fb6a978a4f00abe9a160e3761f";function setPosition(e){getWeather(e.coords.latitude,e.coords.longitude)}function showError(e){notificationElement.innerHTML=`<p>${e.message}</p>`}function getWeather(e,t){fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&appid=${KEY}&lang=ru&units=imperial`).then((function(e){return e.json()})).then((function(e){console.log(e),weather.temperature.value=Math.floor(5*(e.main.temp-32)/9),weather.description=e.weather[0].description,weather.iconId=e.weather[0].icon,weather.city=e.name,weather.country=e.sys.country,weather.wind=Math.floor(1.609*e.wind.speed),weather.temperature.maxValue=Math.floor(5*(e.main.temp_max-32)/9),weather.temperature.minValue=Math.floor(5*(e.main.temp_min-32)/9),weather.humidity=e.main.humidity})).then((function(){displayWeather()}))}function displayWeather(){tempElement.textContent=weather.temperature.value+" °c",descElement.innerHTML=weather.description.charAt(0).toUpperCase()+weather.description.slice(1),locationElement.textContent=`${weather.city}, ${weather.country}`,windElement.textContent=weather.wind+" км/ч",maxTempElement.textContent=weather.temperature.maxValue+" °c",minTempElement.textContent=weather.temperature.minValue+" °c",humidityElement.textContent=weather.humidity+"%","01d"===weather.iconId?iconElement.innerHTML='<div class="sunny"></div>':"04d"===weather.iconId||"04n"===weather.iconId||"03d"===weather.iconId||"03n"===weather.iconId||"02n"===weather.iconId||"02d"===weather.iconId?iconElement.innerHTML='<div class="cloudy"></div>':"09d"===weather.iconId||"09n"===weather.iconId||"10d"===weather.iconId||"10n"===weather.iconId?iconElement.innerHTML='<div class="rainy"></div>':"11d"===weather.iconId||"11n"===weather.iconId?iconElement.innerHTML='<div class="stormy"></div>':"01n"===weather.iconId?iconElement.innerHTML='<div class="starry"></div>':"50n"!==weather.iconId&&"50d"!==weather.iconId||(iconElement.innerHTML=`<img src="img/weather/${weather.iconId}.png"  />`)}function celsiusToFahrenheit(e){return 9*e/5+32}function setCelsiusToFahrenheit(){if(void 0!==weather.temperature.value&&void 0!==weather.temperature.maxValue&&void 0!==weather.temperature.minValue)if("celsius"==weather.temperature.unit){let e=celsiusToFahrenheit(weather.temperature.value),t=celsiusToFahrenheit(weather.temperature.maxValue),n=celsiusToFahrenheit(weather.temperature.minValue);e=Math.floor(e),t=Math.floor(t),n=Math.floor(n),tempElement.textContent=e+" °F",maxTempElement.textContent=t+" °F",minTempElement.textContent=n+" °F",weather.temperature.unit="fahrenheit"}else tempElement.textContent=weather.temperature.value+" °c",maxTempElement.textContent=weather.temperature.maxValue+" °c",minTempElement.textContent=weather.temperature.minValue+" °c",weather.temperature.unit="celsius"}"geolocation"in navigator?navigator.geolocation.getCurrentPosition(setPosition,showError):notificationElement.innerHTML="<p>Ваш браузер не поддерживает геолакацию</p>",tempElement.addEventListener("click",setCelsiusToFahrenheit),maxTempElement.addEventListener("click",setCelsiusToFahrenheit),minTempElement.addEventListener("click",setCelsiusToFahrenheit);